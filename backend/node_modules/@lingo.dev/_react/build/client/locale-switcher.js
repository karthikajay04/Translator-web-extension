"use client";
import { jsx } from "react/jsx-runtime";
import { useState, useEffect } from "react";
import { getLocaleFromCookies, setLocaleInCookies } from "./utils.js";
export function LocaleSwitcher(props) {
  const { locales } = props;
  const [locale, setLocale] = useState(void 0);
  useEffect(() => {
    const currentLocale = getLocaleFromCookies();
    const isValidLocale = currentLocale && locales.includes(currentLocale);
    setLocale(isValidLocale ? currentLocale : locales[0]);
  }, [locales]);
  if (locale === void 0) {
    return null;
  }
  return /* @__PURE__ */ jsx(
    "select",
    {
      value: locale,
      className: props.className,
      onChange: (e) => {
        handleLocaleChange(e.target.value);
      },
      children: locales.map((locale2) => /* @__PURE__ */ jsx("option", { value: locale2, children: locale2 }, locale2))
    }
  );
  function handleLocaleChange(newLocale) {
    setLocaleInCookies(newLocale);
    window.location.reload();
    return Promise.resolve();
  }
}
