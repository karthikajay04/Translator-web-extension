import { jsx } from "react/jsx-runtime";
import { describe, it, expect } from "vitest";
import { render, screen } from "@testing-library/react";
import { LingoContext, useLingo } from "./context.js";
describe("client/context", () => {
  describe("useLingo", () => {
    it("has default dictionary shape and useLingo returns it", () => {
      const Probe = () => {
        const lingo = useLingo();
        return /* @__PURE__ */ jsx(
          "div",
          {
            "data-testid": "probe",
            "data-dict-empty": Object.keys(lingo.dictionary).length === 0 ? "yes" : "no"
          }
        );
      };
      render(/* @__PURE__ */ jsx(Probe, {}));
      const el = screen.getByTestId("probe");
      expect(el.getAttribute("data-dict-empty")).toBe("yes");
    });
    it("provides value via context provider", () => {
      const Probe = () => {
        const lingo = useLingo();
        return /* @__PURE__ */ jsx("div", { "data-testid": "probe", "data-locale": lingo.dictionary.locale });
      };
      render(
        /* @__PURE__ */ jsx(LingoContext.Provider, { value: { dictionary: { locale: "it" } }, children: /* @__PURE__ */ jsx(Probe, {}) })
      );
      const el = screen.getByTestId("probe");
      expect(el.getAttribute("data-locale")).toBe("it");
    });
  });
});
